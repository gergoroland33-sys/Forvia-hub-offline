<!DOCTYPE html><html lang="hu"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Forvia Quality Analysis Pro</title><style>:root{--primary:#3b82f6;--bg:#0f172a;--card-bg:#1e293b;--card-border:#334155;--text-main:#f1f5f9;--text-muted:#94a3b8;--error:#ef4444;--warning:#f59e0b;}body{font-family:'Inter',-apple-system,sans-serif;background-color:var(--bg);color:var(--text-main);margin:0;padding:20px;}.container{max-width:900px;margin:0 auto;}header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid var(--card-border);}.logo h1{margin:0;font-size:1.4rem;font-weight:800;}.logo span{color:var(--primary);}.file-date{font-size:0.9rem;color:var(--text-muted);margin-top:5px;}.filter-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;background:var(--card-bg);padding:15px;border-radius:12px;margin-bottom:20px;border:1px solid var(--card-border);}.filter-group label{display:block;font-size:0.7rem;text-transform:uppercase;margin-bottom:5px;color:var(--text-muted);}select{width:100%;background:var(--bg);color:white;border:1px solid var(--card-border);padding:8px;border-radius:6px;}.stats-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;margin-bottom:20px;}.stat-card{background:var(--card-bg);padding:15px;border-radius:12px;border-left:4px solid var(--primary);}.stat-label{font-size:0.7rem;text-transform:uppercase;color:var(--text-muted);}.stat-value{font-size:1.4rem;font-weight:800;display:block;margin-top:5px;}.top-highlights{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px;}.high-card{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.2);padding:12px;border-radius:10px;}.high-card small{font-size:0.7rem;color:var(--error);font-weight:700;text-transform:uppercase;}.high-card div{font-weight:700;font-size:0.95rem;margin-top:3px;}.analysis-card{background:var(--card-bg);border-radius:15px;padding:20px;margin-bottom:20px;border:1px solid var(--card-border);}h3{font-size:0.9rem;margin:0 0 15px 0;text-transform:uppercase;letter-spacing:1px;}table{width:100%;border-collapse:collapse;font-size:0.85rem;}th{text-align:left;color:var(--text-muted);padding:10px;border-bottom:1px solid var(--card-border);font-size:0.75rem;}td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.05);}.rank{font-weight:800;color:var(--primary);}.badge{background:#0f172a;padding:2px 6px;border-radius:4px;font-size:0.75rem;}.upload-zone{background:var(--card-bg);border:2px dashed var(--card-border);padding:20px;text-align:center;border-radius:15px;margin-bottom:20px;cursor:pointer;}@media print{@page{size:A4 portrait;margin:10mm;}body{background:white;color:black;padding:0;}.container{max-width:100%;}.upload-zone,button,.filter-grid,select{display:none!important;}.analysis-card,.stat-card,.high-card{border:1px solid #eee;background:white!important;box-shadow:none;color:black!important;margin-bottom:10px;}.stat-value,.logo h1,.rank{color:black!important;}.date-header{display:block!important;}table{font-size:0.8rem;}}</style></head><body><div class="container"><header><div class="logo"><h1>FORVIA <span>QUALITY</span></h1><div id="fileDisplay" class="file-date">Töltsön be egy fájlt az elemzéshez</div></div><button onclick="window.print()" style="padding:8px 16px;background:var(--primary);color:white;border:none;border-radius:6px;cursor:pointer;font-weight:700;">NYOMTATÁS / PDF</button></header><div class="upload-zone" onclick="document.getElementById('fileInput').click()"><strong>Kattintson a CSV fájl kiválasztásához</strong><input type="file" id="fileInput" accept=".csv,.txt" style="display:none"></div><div class="filter-grid"><div class="filter-group"><label>Gépsor (A)</label><select id="filterGepsorA" onchange="updateView()"><option value="mind">Mind</option></select></div><div class="filter-group"><label>Gép Megnevezés</label><select id="filterGepsor" onchange="updateView()"><option value="mind">Mind</option></select></div><div class="filter-group"><label>Top lista</label><select id="topLimit" onchange="updateView()"><option value="5">Top 5</option><option value="10" selected>Top 10</option></select></div></div><div class="stats-row"><div class="stat-card"><span class="stat-label">Összes Beültetés</span><span class="stat-value" id="totalBeult">0</span></div><div class="stat-card" style="border-left-color:var(--error);"><span class="stat-label">Felvételi Hiba</span><span class="stat-value" id="totalFelv">0</span></div><div class="stat-card" style="border-left-color:var(--warning);"><span class="stat-label">Kamera Hiba</span><span class="stat-value" id="totalKam">0</span></div></div><div class="top-highlights"><div class="high-card"><small>Kritikus Cikkszám (Felvétel)</small><div id="worstFelv">-</div></div><div class="high-card"><small>Kritikus Cikkszám (Kamera)</small><div id="worstKam">-</div></div></div><div class="analysis-card"><h3 style="color:var(--primary)">Top Felvételi Hibák Elemzése</h3><table id="tableFelv"><thead><tr><th>#</th><th>Cikkszám</th><th>Hiba db</th><th>Arány</th><th>Gépadat</th></tr></thead><tbody></tbody></table></div><div class="analysis-card"><h3 style="color:var(--warning)">Top Kamera Hibák Elemzése</h3><table id="tableKam"><thead><tr><th>#</th><th>Cikkszám</th><th>Hiba db</th><th>Arány</th><th>Gépadat</th></tr></thead><tbody></tbody></table></div></div><script>let allData=[];document.getElementById('fileInput').addEventListener('change',function(e){const f=e.target.files[0];if(!f)return;const dm=f.name.match(/\d{4}\.\d{2}\.\d{2}/g);document.getElementById('fileDisplay').innerText=`Riport: ${f.name} ${dm?'('+dm.join(' - ')+')':''}`;const r=new FileReader();r.onload=(ev)=>{const l=ev.target.result.split('\n').map(x=>x.trim()).filter(x=>x);allData=l.slice(1).map(line=>{const c=line.split(';');return{gA:c[0],g:c[1],cikk:c[2],b:parseInt(c[3])||0,f:parseInt(c[4])||0,k:parseInt(c[5])||0};});popF();upV();};r.readAsText(f);});function popF(){const gA=[...new Set(allData.map(d=>d.gA))].sort();const g=[...new Set(allData.map(d=>d.g))].sort();fillS('filterGepsorA',gA);fillS('filterGepsor',g);}function fillS(id,items){const s=document.getElementById(id);s.innerHTML='<option value="mind">Mind</option>';items.forEach(i=>s.innerHTML+=`<option value="${i}">${i}</option>`);}function upV(){updateView();}function updateView(){if(!allData.length)return;const fGA=document.getElementById('filterGepsorA').value;const fG=document.getElementById('filterGepsor').value;const lim=parseInt(document.getElementById('topLimit').value);const fil=allData.filter(d=>(fGA==='mind'||d.gA===fGA)&&(fG==='mind'||d.g===fG));let s={beult:0,felv:0,kam:0,dF:{},dK:{},dI:{}};fil.forEach(d=>{s.beult+=d.b;s.felv+=d.f;s.kam+=d.k;if(d.f>0)s.dF[d.cikk]=(s.dF[d.cikk]||0)+d.f;if(d.k>0)s.dK[d.cikk]=(s.dK[d.cikk]||0)+d.k;s.dI[d.cikk]=`${d.g} / ${d.gA}`;});document.getElementById('totalBeult').innerText=s.beult.toLocaleString();document.getElementById('totalFelv').innerText=s.felv.toLocaleString();document.getElementById('totalKam').innerText=s.kam.toLocaleString();rTab('tableFelv',s.dF,s.dI,s.felv,lim,'worstFelv');rTab('tableKam',s.dK,s.dI,s.kam,lim,'worstKam');}function rTab(tid,dict,info,tot,lim,wid){const tb=document.getElementById(tid).querySelector('tbody');tb.innerHTML="";const s=Object.entries(dict).sort((a,b)=>b[1]-a[1]);if(s.length>0){document.getElementById(wid).innerText=`${s[0][0]} (${s[0][1]} db)`;}s.slice(0,lim).forEach((i,idx)=>{const p=tot>0?((i[1]/tot)*100).toFixed(1):0;tb.innerHTML+=`<tr><td class="rank">${idx+1}</td><td><strong>${i[0]}</strong></td><td>${i[1].toLocaleString()}</td><td>${p}%</td><td><span class="badge">${info[i[0]]}</span></td></tr>`;});}<\/script></body></html>
</textarea>
