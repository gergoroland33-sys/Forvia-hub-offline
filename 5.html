<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maszk Finder</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#0f172a;color:white;margin:0;padding:20px;text-align:center;}
input{width:100%;padding:15px;font-size:1.5rem;background:#1e293b;border:2px solid #3b82f6;color:white;border-radius:12px;text-align:center;box-sizing:border-box;text-transform:uppercase;margin-bottom:20px;}
#eredmeny{display:none;background:#1e293b;padding:25px;border-radius:15px;border-left:8px solid #fbbf24;animation:pop 0.3s ease;}
h1{color:#3b82f6;margin-bottom:30px;}
.label{color:#94a3b8;font-size:0.8rem;text-transform:uppercase;letter-spacing:1px;}
.big-val{font-size:3.5rem;font-weight:900;color:#fbbf24;line-height:1;margin:10px 0;}
.sub-val{font-size:1.5rem;font-weight:bold;}
@keyframes pop{from{transform:scale(0.9);opacity:0;}to{transform:scale(1);opacity:1;}}
#status{color:#ef4444;font-size:0.9rem;margin-top:10px;}
</style>
</head>
<body>

<h1>Maszk Kereső</h1>

<input type="text" id="inp" placeholder="PL: M10..." oninput="keres()" autocomplete="off">

<div id="eredmeny">
<div class="label">SZEKRÉNY</div>
<div class="big-val" id="szekreny">-</div>
<div style="margin-top:15px;">
<div class="label">FAKK SZÁMA</div>
<div class="sub-val" id="fakk">-</div>
</div>
</div>

<div id="status"></div>

<script>
let adatb = [];
let fejléc = [];

// Itt olvassuk be a CSV-t. A %20 jelenti a szóközt!
fetch('Maszk%202026.csv')
.then(response => {
if (!response.ok) throw new Error("A CSV fájl nem található!");
return response.text();
})
.then(szoveg => {
adatb = szoveg.split('\n');
// Az első sor a fejléc (Szekrény számok)
fejléc = adatb[0].split(';');
document.getElementById('status').style.color = '#10b981';
document.getElementById('status').innerText = "Adatbázis betöltve.";
})
.catch(hiba => {
document.getElementById('status').innerText = "HIBA: A 'Maszk 2026.csv' nem olvasható. Ellenőrizd a mappát!";
});

function keres() {
const kulcs = document.getElementById('inp').value.trim().toUpperCase();
const doboz = document.getElementById('eredmeny');

if (kulcs.length < 2) {
doboz.style.display = 'none';
return;
}

// Végigmegyünk a sorokon (az 1. sortól kezdve)
let talalat = false;
for (let i = 1; i < adatb.length; i++) {
const sor = adatb[i].split(';');

// Végigmegyünk az oszlopokon
for (let j = 0; j < sor.length; j++) {
// Ha megvan a Maszk ID
if (sor[j] && sor[j].trim().toUpperCase() === kulcs) {

// Kiszámoljuk, melyik szekrényhez tartozik
// A CSV logika: Fakk;Maszk;Fakk;Maszk...
// Tehát a Maszk indexe (j) mindig páratlan (1, 3, 5...)
// A hozzá tartozó Szekrény indexe a fejlécben: (j-1)
// VAGY ha a fejléc másképp van: oszlop pár indexe * 2

const oszlopParIndex = Math.floor(j / 2);
const fejlecIndex = oszlopParIndex * 2;

// Ha a fejlécben üres a cella, akkor az előzőt vesszük (egyesített cellák miatt)
let szekrenyNev = fejléc[fejlecIndex];
if(!szekrenyNev || szekrenyNev.trim() === "") {
szekrenyNev = (oszlopParIndex + 1) + ". Szekrény"; // Vészmegoldás
}

const fakkSzam = sor[j-1]; // A fakk száma mindig a maszk előtt van

document.getElementById('szekreny').innerText = szekrenyNev;
document.getElementById('fakk').innerText = fakkSzam + ".";

doboz.style.display = 'block';
talalat = true;
break; // Megvan, kilépünk a belső ciklusból
}
}
if (talalat) break; // Megvan, kilépünk a külső ciklusból
}

if (!talalat) doboz.style.display = 'none';
}
</script>
</body>
</html>
